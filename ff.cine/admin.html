<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel Admin â€¢ ServiÃ§os</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0b1b29;
  color:#fff;
  padding:20px;
}

h1{
  text-align:center;
  color:#1de9b6;
}

.card{
  background:#1e1e1e;
  padding:16px;
  margin-top:15px;
  border-radius:12px;
}

select,button{
  padding:8px;
  border-radius:8px;
  border:none;
  margin-top:8px;
}

button{
  background:#1de9b6;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>ðŸ“‹ Painel de ServiÃ§os</h1>

<div id="lista"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, collection, getDocs, updateDoc, doc } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

/* FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyBgar59yF1k6XmfG0iNOXvWCWKIa9dHcdI",
  authDomain: "servicospc-b3382.firebaseapp.com",
  projectId: "servicospc-b3382"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const lista = document.getElementById("lista");

async function carregarServicos(){

  lista.innerHTML = "Carregando...";

  const querySnapshot = await getDocs(collection(db, "servicos"));

  lista.innerHTML = "";

  querySnapshot.forEach(docSnap => {

    const dados = docSnap.data();

    lista.innerHTML += `
      <div class="card">
        <strong>CÃ³digo:</strong> ${docSnap.id}<br>
        <strong>Nome:</strong> ${dados.nome}<br>
        <strong>ServiÃ§o:</strong> ${dados.servico}<br>
        <strong>Status atual:</strong> ${dados.status}<br>

        <select id="status-${docSnap.id}">
          <option value="Pendente">Pendente</option>
          <option value="Em andamento">Em andamento</option>
          <option value="Finalizado">Finalizado</option>
        </select>

        <button onclick="atualizar('${docSnap.id}')">Atualizar Status</button>
      </div>
    `;
  });
}

window.atualizar = async (codigo) => {

  const novoStatus = document.getElementById("status-"+codigo).value;

  await updateDoc(doc(db, "servicos", codigo), {
    status: novoStatus
  });

  alert("Status atualizado!");
  carregarServicos();
};

carregarServicos();
</script>

</body>
</html>
