<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Configurações do Hotel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{background:#020617;color:#fff;font-family:Segoe UI,sans-serif}
.container{max-width:800px;margin:auto;padding:20px}
.card{background:#0f172a;padding:20px;border-radius:16px;margin-bottom:20px}
button{background:#16a34a;color:#fff;border:none;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer}
input{width:100%;padding:12px;border-radius:10px;border:none;margin-bottom:12px}
</style>
</head>

<body>
<div class="container">

  <div class="card">
    <h2>Banner do Site</h2>
    <input type="file" id="bannerInput" accept="image/*">
    <button onclick="enviarBanner()">Enviar Banner</button>
  </div>

</div>

<script>
const params = new URLSearchParams(window.location.search);
const negocio_id = params.get("id");

if(!negocio_id){
  alert("Negócio não informado");
  throw new Error("Sem negocio_id");
}

const sb = window.supabase.createClient(
  "https://pdajixsoowcyhnjwhgpc.supabase.co",
  "sb_publishable_LatlFlcxk6IchHe3RNmfwA_9Oq4EsZw",
  { auth:{ persistSession:false } }
);

async function enviarBanner(){
  const file = document.getElementById("bannerInput").files[0];
  if(!file){
    alert("Escolha uma imagem");
    return;
  }

  const path = `${negocio_id}/banner.jpg`;

  const { error } = await sb.storage
    .from("banners")
    .upload(path, file, { upsert:true });

  if(error){
    console.error(error);
    alert("Erro ao enviar banner");
    return;
  }

  alert("Banner enviado com sucesso!");
}
</script>
</body>
</html>
